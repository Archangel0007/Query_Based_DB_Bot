@startuml
hide circle
skinparam linetype ortho

entity DimCategory {
  * categoryID : INTEGER
  --
  categoryName : VARCHAR(100)
  description : VARCHAR(255)
  picture : VARCHAR(255)
}

entity DimCustomer {
  * customerID : VARCHAR(50)
  --
  companyName : VARCHAR(100)
  contactName : VARCHAR(100)
  contactTitle : VARCHAR(100)
  address : VARCHAR(255)
  city : VARCHAR(50)
  region : VARCHAR(50)
  postalCode : VARCHAR(20)
  country : VARCHAR(50)
  phone : VARCHAR(50)
  fax : VARCHAR(50)
}

entity DimEmployee {
  * employeeID : INTEGER
  --
  lastName : VARCHAR(100)
  firstName : VARCHAR(100)
  title : VARCHAR(100)
  titleOfCourtesy : VARCHAR(50)
  birthDate : TIMESTAMP
  hireDate : TIMESTAMP
  address : VARCHAR(255)
  city : VARCHAR(50)
  region : VARCHAR(50)
  postalCode : VARCHAR(20)
  country : VARCHAR(50)
  homePhone : VARCHAR(50)
  extension : INTEGER
  photo : VARCHAR(255)
  notes : VARCHAR(1024)
  # reportsTo : INTEGER <<FK>>
  photoPath : VARCHAR(255)
}

entity FactEmployeeTerritory {
  * employeeID : INTEGER <<FK>>
  * territoryID : INTEGER <<FK>>
}

entity FactSalesOrderDetail {
  * orderID : INTEGER <<FK>>
  * productID : INTEGER <<FK>>
  --
  unitPrice : DECIMAL(10, 2)
  quantity : INTEGER
  discount : DECIMAL(10, 2)
}

entity FactSalesOrderDetailFresh {
  * orderID : INTEGER <<FK>>
  * productID : INTEGER <<FK>>
  --
  unitPrice : DECIMAL(10, 2)
  quantity : INTEGER
  discount : DECIMAL(10, 2)
}

entity FactOrderHeader {
  * orderID : INTEGER
  --
  # customerID : VARCHAR(50) <<FK>>
  # employeeID : INTEGER <<FK>>
  orderDate : TIMESTAMP
  requiredDate : TIMESTAMP
  shippedDate : TIMESTAMP
  # shipVia : INTEGER <<FK>>
  freight : DECIMAL(10, 2)
  shipName : VARCHAR(100)
  shipAddress : VARCHAR(255)
  shipCity : VARCHAR(50)
  shipRegion : VARCHAR(50)
  shipPostalCode : VARCHAR(20)
  shipCountry : VARCHAR(50)
}

entity FactOrderUpdated {
  * orderID : INTEGER
  --
  # customerID : VARCHAR(50) <<FK>>
  # employeeID : INTEGER <<FK>>
  orderDate : TIMESTAMP
  requiredDate : TIMESTAMP
  shippedDate : TIMESTAMP
  # shipVia : INTEGER <<FK>>
  freight : DECIMAL(10, 2)
  shipName : VARCHAR(100)
  shipAddress : VARCHAR(255)
  shipCity : VARCHAR(50)
  shipRegion : VARCHAR(50)
  shipPostalCode : VARCHAR(20)
  shipCountry : VARCHAR(50)
}

entity DimProduct {
  * productID : INTEGER
  --
  productName : VARCHAR(100)
  # supplierID : INTEGER <<FK>>
  # categoryID : INTEGER <<FK>>
  quantityPerUnit : VARCHAR(50)
  unitPrice : DECIMAL(10, 2)
  unitsInStock : INTEGER
  unitsOnOrder : INTEGER
  reorderLevel : INTEGER
  discontinued : INTEGER
}

entity DimProductFresh {
  * "Product ID" : INTEGER
  --
  "Product Name" : VARCHAR(100)
  ListPrice : DECIMAL(10, 2)
  UnitCost : DECIMAL(10, 2)
  Discontinued : VARCHAR(10)
  CategoryName : VARCHAR(100)
  Supplier : VARCHAR(100)
}

entity DimRegion {
  * regionID : INTEGER
  --
  regionDescription : VARCHAR(100)
}

entity DimShipper {
  * shipperID : INTEGER
  --
  companyName : VARCHAR(100)
  phone : VARCHAR(50)
}

entity DimSupplier {
  * supplierID : INTEGER
  --
  companyName : VARCHAR(100)
  contactName : VARCHAR(100)
  contactTitle : VARCHAR(100)
  address : VARCHAR(255)
  city : VARCHAR(50)
  region : VARCHAR(50)
  postalCode : VARCHAR(20)
  country : VARCHAR(50)
  phone : VARCHAR(50)
  fax : VARCHAR(50)
  homePage : VARCHAR(255)
}

entity DimTerritory {
  * territoryID : INTEGER
  --
  territoryDescription : VARCHAR(100)
  # regionID : INTEGER <<FK>>
}

DimCategory ||--o{ DimProduct : "has"
DimSupplier ||--o{ DimProduct : "supplies"
DimProduct ||--o{ FactSalesOrderDetail : "is part of"
DimProduct ||--o{ FactSalesOrderDetailFresh : "is part of (fresh)"

DimCustomer ||--o{ FactOrderHeader : "places"
DimEmployee ||--o{ FactOrderHeader : "handles"
DimShipper ||--o{ FactOrderHeader : "ships via"
FactOrderHeader ||--o{ FactSalesOrderDetail : "includes"
FactOrderHeader ||--o{ FactSalesOrderDetailFresh : "includes (fresh)"

DimCustomer ||--o{ FactOrderUpdated : "places (updated)"
DimEmployee ||--o{ FactOrderUpdated : "handles (updated)"
DimShipper ||--o{ FactOrderUpdated : "ships via (updated)"

DimEmployee ||--o{ DimEmployee : "reports to"

DimEmployee ||--o{ FactEmployeeTerritory : "assigned to"
DimTerritory ||--o{ FactEmployeeTerritory : "has assigned employees"

DimRegion ||--o{ DimTerritory : "contains"
@enduml